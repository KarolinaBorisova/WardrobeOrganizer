@using Microsoft.AspNetCore.Identity
@using WardrobeOrganizer.Infrastructure.Data
@inject SignInManager<User> SignInManager
@model HomeUserViewModel

@section css {
    <link rel="stylesheet" href="~/css/Index.css" asp-append-version="true" />
}
@{
    ViewData["Title"] = "Home Page";
}

@if (User.Identity.IsAuthenticated)
{  
    @if (Model.Family != null)
    {
        <div class="text-center">
                <h3 class="display-3">@Model.Family.Name Family</h3>
        </div>
        <div class="text-center">
            <h3 class="display-5">Family members</h3>
        </div>
        @if(Model.Members.Count == 0)
        {
            <div class="text-center">
                <h5 class="display-8">There are no members yet.</h5>
            </div>
        }
        else{
            <div class="card-group">
                @{var count = 0;}
                @foreach (var member in @Model.Members)
                {
                    <div class="card">
                        <div class="card-body">
                            <h4><a class="card-title text-dark" asp-controller="Member" asp-route-id="@member.Id" asp-action="Info">@member.FirstName @member.LastName</a></h4>        
                        </div>
                    </div>
                    count++;
                    if(count == 3 ){
                        break;
                    };
                }
            </div>
            <div class="text-center">
                <a class="btn btn-primary" asp-controller="Member" asp-action="All">Show all family members</a>
            </div>
        }
        <div class="text-center">
            <a class="btn btn-primary" asp-controller="Member" asp-action="Add">Add new member</a>
        </div>

        <div class="text-center">
            <h5 class="display-5">Family houses</h5>
        </div>
        @if (Model.Houses.Count == 0)
        {
            <div class="text-center">
                <h5 class="display-8">There are no houses yet.</h5>
            </div>
        }
        else{
            <div class="card-group">
                @{
                    var count = 0;
                }
                @foreach (var house in @Model.Houses)
                {
                    <div class="card">
                        <div class="card-body">
                            <h4><a class="card-title text-dark" asp-controller="House" asp-route-houseId="@house.Id" asp-action="Info">@house.Name</a></h4>
                            <p class="card-text">Address: @house.Address</p>
                        </div>
                    </div>
                    count++;
                   // if (count == 3)
                   // {
                   //     break;
                   // };
                }
            </div>
            <div class="text-center">
                <a class="btn btn-primary" asp-controller="House" asp-action="All">Show all family houses</a>
            </div>
        }
      
        <div class="text-center">
            <a class="btn btn-primary" asp-controller="House" asp-action="Add">Add new house</a>
        </div>

    }
    else
    {
        <div class="text-center">
            <h3 class="display-3">First Step:</h3>
            <a class="btn btn-primary" asp-controller="Family" asp-action="Add">Add Family</a>
        </div>

    }


}
else{
    <div class="text-center test">
        <h1 class="display-4">Wardrobe Organizer</h1>
        <p class="basic-info">Organise your family closet easer. Build your family profile with all family members and all family houses.
            You can add your items to diferent house storage by snapping pictures of your clothes and accessories.
            Use the app to store your digital wardrobe and enjoy the easiest way of closet organisation.</p>
        <p class="img-container">
            <img src="https://www.homelane.com/blog/wp-content/uploads/2019/05/shutterstock_1699684156-768x512.jpg" alt="Smiley face" style="width:80%;">
        </p>
    </div>
}
